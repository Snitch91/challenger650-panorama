<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Challenger 650 Virtual Tour</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css"/>
  <script src="https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #panorama {
      width: 100%;
      height: 100vh;
    }

    /* Pulzáló hotspot a panorámához rögzítve */
    .custom-hotspot {
      width: 40px;          /* hotspot mérete */
      height: 40px;
      background: #00aaff;
      border-radius: 50%;
      cursor: pointer;
      position: relative;   /* fontos: Pannellum kezeli a pozíciót */
    }

    .custom-hotspot::after {
      content: '';
      position: absolute;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(0,170,255,0.5);
      animation: pulse 1.8s infinite;
      top: 0;
      left: 0;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 0.7;
      }
      70% {
        transform: scale(2);
        opacity: 0.3;
      }
      100% {
        transform: scale(2.5);
        opacity: 0;
      }
    }
  </style>
</head>
<body>

<div id="panorama"></div>

<script>
  // Pannellum viewer inicializálása
  var viewer = pannellum.viewer('panorama', {
      "default": {
          "firstScene": "cockpit",
          "autoLoad": true,
          "sceneFadeDuration": 1000
      },
      "scenes": {
          "cockpit": {
              "type": "equirectangular",
              "panorama": "Cockpit.jpg",
              "hotSpots": [
                  {
                      "pitch": -140,          // függőleges pozíció a panorámában
                      "yaw": -30,            // vízszintes pozíció a panorámában
                      "cssClass": "custom-hotspot",
                      "createTooltipFunc": hotspot,
                      "createTooltipArgs": "Passenger Seat",
                      "clickHandlerFunc": function() {
                          viewer.loadScene("passenger");
                      }
                  }
              ]
          },
          "passenger": {
              "type": "equirectangular",
              "panorama": "Passenger.jpg",
              "hotSpots": [
                  {
                      "pitch": 0,
                      "yaw": -60,
                      "cssClass": "custom-hotspot",
                      "createTooltipFunc": hotspot,
                      "createTooltipArgs": "Cockpit",
                      "clickHandlerFunc": function() {
                          viewer.loadScene("cockpit");
                      }
                  }
              ]
          }
      }
  });

  // Hotspot tooltip függvény (felirat)
  function hotspot(hotSpotDiv, args) {
      hotSpotDiv.classList.add('custom-hotspot');

      var tooltip = document.createElement('div');
      tooltip.innerHTML = args;
      tooltip.style.position = 'absolute';
      tooltip.style.bottom = '50px';
      tooltip.style.left = '-20px';
      tooltip.style.padding = '3px 8px';
      tooltip.style.background = 'rgba(0,0,0,0.6)';
      tooltip.style.color = '#fff';
      tooltip.style.borderRadius = '4px';
      tooltip.style.fontSize = '12px';
      tooltip.style.whiteSpace = 'nowrap';

      hotSpotDiv.appendChild(tooltip);
  }
</script>

</body>
</html>
